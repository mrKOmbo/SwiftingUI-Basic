- Plasmarlo en un proyecto
## Index %% fold %%
[..](obsidian://open?vault=Swift&file=LEARNING%2FSWIFTUI%2F%E4%BA%94%20Interacci%C3%B3n%20y%20dise%C3%B1o%2F%E4%BA%94%20INDEX%20%E4%BA%94)
## <span style="color:#ff6600">━━━━━━━━━━━━━━━━━━━━━━━━━━━</span>

- **[[#What to do?]]** : Explicación general del objetivo (animar imagen al tocarla)
- **[[#How to do]]** : Configuración inicial de imagen, estado y .onTapGesture
- **[[#Co-animation]]** : Animar varios elementos al mismo tiempo
- **[[#Alinnation]]** : Centrado y posicionamiento dinámico con GeometryReader
- **[[#Aditional]]** : Efectos extra (blanco y negro, rotación, clipShape)

<span style="color:#ff6600">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span>

## What to do?

<div style="display: flex; gap: 15px;">
  <div style="flex: 1;">
    Para este ejemplo expandiremos una imagen para poder verla más grande.
	En este caso será la gacela para poder visualizarla mejor:
  </div>
  <img src="Pasted image 20250721225047.png" width="20%">
</div>

### How to do
Primero se tiene que identificar el elemento que se quiere usar, en este caso una imagen.
```swift
struct ContentView : View {
  var body: some View {

        Image("thumb")

          .position(x: 600, y: 50)

          .scaleEffect(0.33)

          .shadow(radius: 10)
  }
}
```

Y darle el modificador `.onTapGesture{}` [.](obsidian://open?vault=Swift%20Beginner&file=SWIFTUI%2FModifier%2FModificadores%20de%20interacci%C3%B3n) .
Además se necesita una variable de estado para controlar si se presionó la imagen para poder controlar la acción.

**Conservación de estado**:
<div class="recuadro">
  @State var zoomed = false
</div>

En este caso al ser una animación básica se usarán dimensiones absolutas, por lo que se tiene que considerar **hacía que dirección** vamos a querer que vaya la imagen y las dimensiones que va a tener cuando se transforme.

**Posición**:
<div class="recuadro">
.position(x: self.zoomed ? 220 : 600, y: 50)
</div>
**Escalamiento**:
<div class="recuadro">
 .scaleEffect(self.zoomed ? 1.33 : 0.33) 
</div>

Por lo tanto así quedaría el resultado:

<div style="display: flex; gap: 15px;">
  <style>
    .code-box {
      background-color: transparent; /* ❌ sin fondo */
      color: #d4d4d4;
      padding: 0px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
      white-space: pre;
    }
    .keyword { color: #c586c0; font-weight: bold; }
    .type { color: #4ec9b0; }
    .property { color: #9cdcfe; }
    .function { color: #dcdcaa; }
    .string { color: #ce9178; }
    .number { color: #b5cea8; }
  </style>

  <div style="flex: 1;">
    <pre class="code-box"><code>
<span class="keyword">struct</span> <span class="type">ContentView</span> : <span class="type">View</span> {
  <span class="keyword">@State</span> <span class="property">var</span> <span class="property">zoomed</span> = <span class="keyword">false</span>
  <span class="property">var</span> <span class="property">body</span>: <span class="type">some View</span> {
    <span class="type">Image</span>(<span class="string">"thumb"</span>)
      .<span class="function">position</span>(x: <span class="keyword">self</span>.<span class="property">zoomed</span> ? <span class="number">220</span> : <span class="number">600</span>, y: <span class="number">50</span>)
      .<span class="function">scaleEffect</span>(<span class="keyword">self</span>.<span class="property">zoomed</span> ? <span class="number">1.33</span> : <span class="number">0.33</span>) 
      .<span class="function">shadow</span>(radius: <span class="number">10</span>)
      .<span class="function">onTapGesture</span>{
        <span class="keyword">self</span>.<span class="property">zoomed</span>.<span class="function">toggle</span>()
      }
  }
}
</code></pre>
  </div>

  <div style="flex: 1; text-align: right;">
    <video width="150" height="auto" controls>
      <source src="touch2.mov" type="video/mp4">
    </video>
  </div>
</div>
Pero, para que la animación sea más fluida se puede utilizar `.animation()`:

<div style="display: flex; gap: 15px;">
  <style>
    .code-box {
      background-color: transparent; /* ❌ sin fondo */
      color: #d4d4d4;
      padding: 0px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
      white-space: pre;
    }
    .keyword { color: #c586c0; font-weight: bold; }
    .type { color: #4ec9b0; }
    .property { color: #9cdcfe; }
    .function { color: #dcdcaa; }
    .string { color: #ce9178; }
    .number { color: #b5cea8; }
  </style>

  <div style="flex: 1;">
    <pre class="code-box"><code>
<span class="keyword">struct</span> <span class="type">ContentView</span> : <span class="type">View</span> {
  <span class="keyword">@State</span> <span class="property">var</span> <span class="property">zoomed</span> = <span class="keyword">false</span>
  <span class="property">var</span> <span class="property">body</span>: <span class="type">some View</span> {
    <span class="type">Image</span>(<span class="string">"thumb"</span>)
      .<span class="function">position</span>(x: <span class="keyword">self</span>.<span class="property">zoomed</span> ? <span class="number">220</span> : <span class="number">600</span>, y: <span class="number">50</span>)
      .<span class="function">scaleEffect</span>(<span class="keyword">self</span>.<span class="property">zoomed</span> ? <span class="number">1.33</span> : <span class="number">0.33</span>) 
      .<span class="function">shadow</span>(radius: <span class="number">10</span>)
      .<span class="function">animation</span>(.default)
      .<span class="function">onTapGesture</span>{
        <span class="keyword">self</span>.<span class="property">zoomed</span>.<span class="function">toggle</span>()
      }
  }
}
</code></pre>
  </div>

  <div style="flex: 1; text-align: right;">
    <video width="150" height="auto" controls>
      <source src="touch.mov" type="video/mp4">
    </video>
  </div>
</div>
Aquí se puede usar el modificador `.default` o `.spring()`, la diferencia está en la forma en la que lo va a hacer.
Los dos utilizan una "harmonic oscillator" para lograr la animación. 

## Co-animation
No solo una animación tiene que pasar a la vez en un evento, puede haber diversas afectadas.
Un **ejemplo** claro está en el título del thumb, se puede salir de la pantalla al hacer click en la imagen, aquí también se puede agregar `.animation()` para que la transición sea suave.

<div style="display: flex; gap: 15px;">
  <style>
    .code-box {
      background-color: transparent;
      color: #d4d4d4;
      padding: 0px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
      white-space: pre;
    }
    .keyword { color: #c586c0; font-weight: bold; }
    .type { color: #4ec9b0; }
    .property { color: #9cdcfe; }
    .function { color: #dcdcaa; }
    .string { color: #ce9178; }
    .number { color: #b5cea8; }
  </style>

  <div style="flex: 1;">
    <pre class="code-box"><code>
<span class="keyword">struct</span> <span class="type">ContentView</span> : <span class="type">View</span> {
  <span class="property">var</span> <span class="property">body</span>: <span class="type">some View</span> {
    <span class="type">TourTitle</span>(title: <span class="string">"Savanna Trek"</span>, caption: <span class="string">"15 mile..."</span>)
    // Normal offset: .offset(x:0, y: -15)
      .<span class="function">offset</span>(x: <span class="keyword">self</span>.<span class="property">zoomed</span> ? <span class="number">500</span> : <span class="number">0</span>, y: <span class="number">-15</span>) //Sacarlo de la pantalla 
      .<span class="function">padding</span>(.<span class="property">leading</span>, <span class="number">30</span>)
  }
}
</code></pre>
  </div>
  <div style="flex: 1; text-align: right;">
    <video width="150" height="auto" controls>
      <source src="Tin.mov" type="video/mp4">
    </video>
  </div>
</div>
<div class="recuadro">
      .offset(x: self.zoomed ? 500 : 0, y: -15) //Sacarlo de la pantalla 
</div>
## Alinnation
Un detalle importante es la forma en la que se alinea con toda la vista, que este justo en medio.
Para hacer esto se necesita usar `GeometryReader` para alinearlo, la sintaxis para usarlo:



<div style="display: flex; gap: 15px;">
  <style>
    .code-box {
      background-color: transparent;
      color: #d4d4d4;
      padding: 0px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
      white-space: pre;
    }
    .keyword { color: #c586c0; font-weight: bold; }
    .type { color: #4ec9b0; }
    .property { color: #9cdcfe; }
    .function { color: #dcdcaa; }
    .string { color: #ce9178; }
    .number { color: #b5cea8; }
  </style>

  <div style="flex: 1;">
    <pre class="code-box"><code>
<span class="keyword">struct</span> <span class="type">ContentView</span> : <span class="type">View</span> {
 <span class="keyword">@State</span> <span class="property">var</span> <span class="property">zoomed</span> = <span class="keyword">false</span>
  <span class="property">var</span> <span class="property">body</span>: <span class="type">some View</span> {
    <span class="type">GeometryReader</span> { geometry <span class="keyword">in</span>
      <span class="type">Image</span>(<span class="string">"thumb"</span>)
		// before: .position(x: 600, y: 50)
        .<span class="function">position</span>(x: <span class="keyword">self</span>.<span class="property">zoomed</span> ? geometry.<span class="function">frame</span>(in: .<span class="property">local</span>).<span class="property">midX</span> : <span class="number">600</span>, y: <span class="number">50</span>)
        .<span class="function">scaleEffect</span>(<span class="number">0.33</span>)
        .<span class="function">shadow</span>(radius: <span class="number">10</span>)
    }
    .<span class="function">scaleEffect</span>(<span class="keyword">self</span>.<span class="property">zoomed</span> ? <span class="number">1.33</span> : <span class="number">0.33</span>)
    .<span class="function">animation</span>(.default)
    .<span class="function">onTapGesture</span>{
        <span class="keyword">self</span>.<span class="property">zoomed</span>.<span class="function">toggle</span>()
    }
  }
}
</code></pre>
  </div>

  <div style="flex: 1; text-align: right;">
    <video width="150" height="auto" controls>
      <source src="Tin2.mov" type="video/mp4">
    </video>
  </div>
</div>
<div style="display: flex; gap: 15px;">
  <style>
    .code-box {
      background-color: transparent;
      color: #d4d4d4;
      padding: 0px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
      white-space: pre;
    }
    .keyword { color: #c586c0; font-weight: bold; }
    .type { color: #4ec9b0; }
    .property { color: #9cdcfe; }
    .function { color: #dcdcaa; }
    .string { color: #ce9178; }
    .number { color: #b5cea8; }
  </style>

  <div style="flex: 1;">
    <pre class="code-box"><code>
<span class="keyword">struct</span> <span class="type">ContentView</span> : <span class="type">View</span> {
  <span class="keyword">@State</span> <span class="property">var</span> <span class="property">zoomed</span> = <span class="keyword">false</span>
  <span class="property">var</span> <span class="property">body</span>: <span class="type">some View</span> {
    <span class="type">GeometryReader</span> { geometry <span class="keyword">in</span>
      <span class="type">Image</span>(<span class="string">"thumb"</span>)
        .<span class="function">clipShape</span>(<span class="type">RoundedRectangle</span>(cornerRadius: <span class="keyword">self</span>.<span class="property">zoomed</span> ? <span class="number">40</span> : <span class="number">500</span>))
        .<span class="function">position</span>(x: <span class="keyword">self</span>.<span class="property">zoomed</span> ? geometry.<span class="function">frame</span>(in: .<span class="property">local</span>).<span class="property">midX
        </span> : <span class="number">600</span>, y: <span class="number">50</span>)
        .<span class="function">scaleEffect</span>(<span class="number">0.33</span>)
        .<span class="function">overlay</span>(
          <span class="type">Circle</span>()
            .<span class="function">fill</span>(<span class="keyword">self</span>.<span class="property">zoomed</span> ? <span class="type">Color</span>.<span class="property">clear</span> : <span class="type">Color</span>
            (red: <span class="number">1.0</span>, green: <span class="number">1.0</span>, blue: <span class="number">1.0</span>, opacity: <span class="number">0.25</span>))
            .<span class="function">scaleEffect</span>(<span class="number">0.8</span>)
        )
        .<span class="function">scaleEffect</span>(<span class="keyword">self</span>.<span class="property">zoomed</span> ? <span class="number">1.33</span> : <span class="number">0.33</span>)
        .<span class="function">shadow</span>(radius: <span class="number">10</span>)
        .<span class="function">animation</span>(.<span class="property">default</span>)
        .<span class="function">onTapGesture</span> {
          <span class="keyword">self</span>.<span class="property">zoomed</span>.<span class="function">toggle</span>()
        }
    }
  }
}
</code></pre>
  </div>

  <div style="flex: 1; text-align: right;">
    <video width="150" height="auto" controls>
      <source src="Tin3.mov" type="video/mp4">
    </video>
  </div>
</div>
## Aditional
Ahora si se quisiera poner en blanco y negro,  y hacer una rotación al momento de activarlo.
<div style="display: flex; gap: 15px;">
  <style>
    .code-box {
      background-color: transparent;
      color: #d4d4d4;
      padding: 0px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
      white-space: pre;
    }
    .keyword { color: #c586c0; font-weight: bold; }
    .type { color: #4ec9b0; }
    .property { color: #9cdcfe; }
    .function { color: #dcdcaa; }
    .string { color: #ce9178; }
    .number { color: #b5cea8; }
  </style>

  <div style="flex: 1;">
    <pre class="code-box"><code>
<span class="keyword">struct</span> <span class="type">ContentView</span> : <span class="type">View</span> {
  <span class="keyword">@State</span> <span class="property">var</span> <span class="property">zoomed</span> = <span class="keyword">false</span>
  <span class="property">var</span> <span class="property">body</span>: <span class="type">some View</span> {
    <span class="type">GeometryReader</span> { geometry <span class="keyword">in</span>
      <span class="type">Image</span>(<span class="string">"thumb"</span>)
        .<span class="function">clipShape</span>(<span class="type">RoundedRectangle</span>(cornerRadius: <span class="keyword">self</span>.<span class="property">zoomed</span> ? <span class="number">40</span> : <span class="number">500</span>))
        .<span class="function">position</span>(x: <span class="keyword">self</span>.<span class="property">zoomed</span> ? geometry.<span class="function">frame</span>(in: .<span class="property">local</span>).<span class="property">midX
        </span> : <span class="number">600</span>, y: <span class="number">50</span>)
        .<span class="function">scaleEffect</span>(<span class="number">0.33</span>)
        .<span class="function">overlay</span>(
          <span class="type">Circle</span>()
            .<span class="function">fill</span>(<span class="keyword">self</span>.<span class="property">zoomed</span> ? <span class="type">Color</span>.<span class="property">clear</span> : <span class="type">Color</span>
            (red: <span class="number">1.0</span>, green: <span class="number">1.0</span>, blue: <span class="number">1.0</span>, opacity: <span class="number">0.25</span>))
            .<span class="function">scaleEffect</span>(<span class="number">0.8</span>)
        )
        .<span class="function">saturation</span>(<span class="keyword">self</span>.<span class="property">zoomed</span> ? <span class="number">1</span> : <span class="number">0</span>)
        .<span class="function">rotationEffect</span>(<span class="keyword">self</span>.<span class="property">zoomed</span> ? .<span class="function">degrees</span>(<span class="number">0</span>) : .<span class="function">degrees</span>(<span class="number">90</span>))
        .<span class="function">scaleEffect</span>(<span class="keyword">self</span>.<span class="property">zoomed</span> ? <span class="number">1.33</span> : <span class="number">0.33</span>)
        .<span class="function">shadow</span>(radius: <span class="number">10</span>)
        .<span class="function">animation</span>(.<span class="property">default</span>)
        .<span class="function">onTapGesture</span> {
          <span class="keyword">self</span>.<span class="property">zoomed</span>.<span class="function">toggle</span>()
        }
    }
  }
}
</code></pre>
  </div>

  <div style="flex: 1; text-align: right;">
    <video width="150" height="auto" controls>
      <source src="Tin4.mov" type="video/mp4">
    </video>
  </div>
</div>
<div class="recuadro">
		.saturation(self.zoomed ? 1 : 0)
</div>
<div class="recuadro">
        .rotationEffect(self.zoomed ? .degrees(0) : .degrees(90))
</div>
Más detalles del proyecto:
[animations](file:///Users/milo/Develop/Swift/Notes/Swift/LEARNING/SWIFTUI/五%20Interacción%20y%20diseño/Interaction/Animations/projects/animations/animations.xcodeproj)

